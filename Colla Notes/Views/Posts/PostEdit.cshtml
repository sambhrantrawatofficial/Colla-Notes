@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{
    var Username = HttpContextAccessor.HttpContext.Session.GetString("username");
}
@model Post
@{
    ViewData["Title"] = "Edit Post";
}

<div class="container mt-5 mb-5 max-w-5xl">

    <!-- PAGE HEADER -->
    <div class="mb-8">
        <div class="text-2xl md:text-3xl font-bold text-gray-500 flex items-center gap-2">
            <a href="/Posts/PostHome"
               class="hover:text-gray-900 transition">
                Posts
            </a>
            <span class="text-gray-400">/</span>
            <span class="text-gray-800">Edit Post</span>
        </div>

        <h1 class="mt-3 text-3xl md:text-3xl font-bold tracking-tight flex items-center gap-3">
            Edit Your Post ✏️
        </h1>

        <p class="mt-2 text-gray-500 max-w-2xl">
            Refine your thoughts, sharpen your message, and publish with confidence.
        </p>
    </div>

    <!-- GLASS CARD -->
    <div class="card border-0 rounded-[2rem] shadow-2xl bg-white/70 backdrop-blur-xl">
        <div class="card-body p-6 md:p-10">

            <!-- FORM -->
            <form asp-action="PostEdit" method="post" novalidate asp-controller="Posts">
                <input asp-for="Post_Id" type="hidden" />

                <!-- TITLE -->
                <div class="mb-8">
                    <label asp-for="Title" class="block text-xl font-semibold mb-2">
                        Post Title
                    </label>

                    <input asp-for="Title"
                           class="form-control form-control-lg rounded-xl border-2 shadow-sm focus:border-emerald-500 focus:ring-emerald-500"
                           placeholder="Enter a clear and meaningful title" />

                    <small class="text-gray-500 block mt-2">
                        This title will be visible to all users.
                    </small>
                </div>

                <!-- DESCRIPTION -->
                <div class="mb-10">
                    <label asp-for="Description" class="block text-xl font-semibold mb-2">
                        Post Content
                    </label>

                    <textarea asp-for="Description"
                              id="editor"
                              class="form-control rounded-xl border-2 shadow-sm focus:border-emerald-500 focus:ring-emerald-500"
                              rows="12"
                              placeholder="Improve clarity, flow, and structure..."></textarea>

                    <small class="text-gray-500 block mt-2">
                        Use formatting to make your content more readable.
                    </small>
                </div>

                <!-- TAGS -->
                <div class="mb-10">
                    <label class="block text-xl font-semibold mb-3">
                        Tags
                    </label>

                    <div class="flex flex-wrap gap-4">
                        <input type="text"
                               asp-for="Tag_1"
                               class="form-control rounded-full px-5 py-2 shadow-sm w-52 focus:ring-emerald-500"
                               placeholder="#update" />

                        <input type="text"
                               asp-for="Tag_2"
                               class="form-control rounded-full px-5 py-2 shadow-sm w-52 focus:ring-emerald-500"
                               placeholder="#revision" />
                    </div>

                    <small class="text-gray-500 block mt-2">
                        Update tags to improve discoverability.
                    </small>
                </div>

                <!-- ACTION BAR -->
                <div class="flex flex-col md:flex-row justify-between items-center gap-6 mt-12 pt-6 border-t">

                    <a asp-controller="Posts"
                       asp-action="PostHome"
                       class="text-lg font-semibold text-gray-600 hover:text-black transition">
                        ← Back to Posts
                    </a>

                    <div class="flex gap-4">
                        <button type="submit"
                                class="btn btn-success rounded-full px-8 py-3 text-lg shadow-lg hover:shadow-xl transition-all">
                            💾 Save Changes
                        </button>

                        <a asp-controller="Posts"
                           asp-action="PostHome"
                           class="btn btn-outline-danger rounded-full px-8 py-3 text-lg">
                            Cancel
                        </a>
                    </div>
                </div>

            </form>

        </div>
    </div>
</div>

<!-- CKEDITOR -->
<script src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js"></script>
<script>
    ClassicEditor
        .create(document.querySelector('#editor'), {
            toolbar: [
                'heading', '|',
                'bold', 'italic', 'link',
                'bulletedList', 'numberedList', '|',
                'blockQuote', 'undo', 'redo'
            ]
        })
        .catch(error => console.error(error));
</script>